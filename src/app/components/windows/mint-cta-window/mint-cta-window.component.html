<div appDraggable appResizable #elementWithDrag [style.width.px]="width()" [style.height.px]="height()" (windowResize)="onResize($event)" [appDraggableInitialPosition]="initialPosition" class="float-window">

  <!-- Header acts as the drag handle -->
  <div class="drag-handle" [class.cursor-grab]="!isDragging" [class.cursor-grabbing]="isDragging" (mousedown)="isDragging = true" (mouseup)="isDragging = false">
    <label>{{ title }}</label>
    <button (click)="close()" class="drag-handle-close">
      &times;
    </button>
  </div>

  <!-- CTA Content -->
  <div class="cta-content">
    <!-- NFT Showcase Carousel -->
    <div class="showcase-section">
      @if (isLoading()) {
        <div class="showcase-loading">
          <app-pixel-icon name="autorenew" class="spinning" />
        </div>
      } @else if (featuredNfts().length > 0) {
        <div class="carousel">
          <button type="button" class="carousel-btn prev" (click)="prevSlide()">
            <app-pixel-icon name="chevron_left" />
          </button>
          <div class="carousel-image">
            <img [src]="featuredNfts()[currentSlide()].imageIpfsUrl" [alt]="featuredNfts()[currentSlide()].name" />
            <span class="nft-name">{{ featuredNfts()[currentSlide()].name }}</span>
          </div>
          <button type="button" class="carousel-btn next" (click)="nextSlide()">
            <app-pixel-icon name="chevron_right" />
          </button>
        </div>
        <div class="carousel-dots">
          @for (nft of featuredNfts(); track $index) {
            <span class="dot" [class.active]="$index === currentSlide()" (click)="currentSlide.set($index)"></span>
          }
        </div>
      }
    </div>

    <!-- Title Section -->
    <div class="title-section">
      <h2>Nevermore NFT Collection</h2>
      <p class="tagline">Your lifetime membership to Corvid Labs</p>
    </div>

    <!-- Benefits Grid -->
    <div class="benefits-grid">
      @for (benefit of benefits; track benefit.title) {
        <div class="benefit-item">
          <app-pixel-icon [name]="benefit.icon" />
          <div class="benefit-text">
            <span class="benefit-title">{{ benefit.title }}</span>
            <span class="benefit-desc">{{ benefit.description }}</span>
          </div>
        </div>
      }
    </div>

    <!-- Marketplace Links -->
    <div class="marketplace-section">
      <span class="section-label">Available On</span>
      <div class="marketplace-buttons">
        @for (market of marketplaces; track market.name) {
          <button type="button" class="nes-btn is-primary marketplace-btn" (click)="openMarketplace(market)">
            <app-pixel-icon [name]="market.icon" />
            <span>{{ market.name }}</span>
          </button>
        }
      </div>
    </div>
  </div>
</div>
