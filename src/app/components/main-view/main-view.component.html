<!-- We use Tailwind classes directly for styling -->
<!-- The main container is now a flex column to position the window area and the dock -->
<div class="main-view">
    <!-- <img src="wallpapers/space-gradient-background.png" class="absolute top-0 left-0 w-full h-full object-cover -z-100" alt="BackgroundImage"> -->

    <!-- This div will be the area where floating windows can exist, positioned above the dock -->
    <div class="main-view-content">
      <!--
        This is the magic part!
        It's an invisible anchor in your template.
        The #windowHost is a template reference variable that we use in the .ts file.
      -->
      <ng-template #windowHost></ng-template>
    </div>

    <!-- This is the macOS-style dock -->
    <div class="main-view-dock-region">
      @if (!launchpadDrawerOpen()) {
        <div class="main-view-dock-bar">
          <!-- Dynamic dock icons -->
          @for (item of dockItems(); track item.type) {
            <div class="main-view-dock-item" (click)="openWindowByType(item.type)" [title]="item.label">
              @if (item.imgIcon) {
                <div class="w-12 h-12">
                  <img [src]="item.imgIcon" alt="{{ item.label }}" class="item-icon" />
                </div>
              } @else {
                <cvd-pixel-icon [name]="item.icon" size="lg" class="item-icon" />
              }
            </div>
          }
        </div>
      }
    </div>

    <!-- Launchpad Backdrop (shown when drawer is open) -->
    @if (launchpadDrawerOpen()) {
      <div class="launchpad-backdrop" [class.backdrop-visible]="launchpadDrawerOpen()" (click)="closeLaunchpadDrawer()">
      </div>
    }

    <!-- Launchpad Drawer Host -->
    <ng-template #launchpadDrawerHost></ng-template>

    <!-- Login Overlay Host -->
    <ng-template #loginOverlayHost></ng-template>

</div>
